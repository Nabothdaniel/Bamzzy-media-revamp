<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart - BAMZY MEDIA</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts - Space Grotesk -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Space Grotesk', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            500: '#3B82F6',
                            600: '#2563EB',
                        },
                        secondary: {
                            500: '#6B7280',
                            600: '#4B5563',
                        },
                        success: {
                            500: '#10B981',
                        },
                        warning: {
                            500: '#F59E0B',
                        },
                        danger: {
                            500: '#EF4444',
                        },
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom styles that Tailwind can't easily handle */
        .badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 1.5rem;
            height: 1.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            line-height: 1;
            padding: 0 0.375rem;
        }

        .modal {
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-content {
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        /* Animation for cart items */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .cart-item {
            animation: fadeIn 0.3s ease forwards;
        }
    </style>
</head>

<body class="bg-gray-100 font-sans text-gray-900">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <div class="w-64 bg-gray-900 text-white flex-shrink-0 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out fixed h-full z-10"
            id="sidebar">
            <div class="p-4 border-b border-gray-800">
                <div class="flex justify-between items-center">
                    <h2 class="text-xl font-bold">BAMZY MEDIA</h2>
                    <button id="closeSidebar" class="md:hidden text-gray-400 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <div class="p-4 border-b border-gray-800">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                    <div>
                        <h3 id="userName" class="font-medium">Loading...</h3>
                        <p id="userBalance" class="text-sm text-gray-400">Balance: â‚¦0</p>
                    </div>
                </div>
            </div>

            <nav class="p-4">
                <ul class="space-y-2">
                    <li>
                        <a href="dashboard.html"
                            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white">
                            <i class="fas fa-home w-5"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="cart.html"
                            class="flex items-center space-x-3 px-3 py-2 rounded-lg bg-gray-800 text-white">
                            <i class="fas fa-shopping-cart w-5"></i>
                            <span>Cart</span>
                            <span id="cartCount" class="badge bg-blue-600 text-white ml-auto">0</span>
                        </a>
                    </li>
                    <li>
                        <a href="purchases.html"
                            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white">
                            <i class="fas fa-history w-5"></i>
                            <span>Purchase History</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" id="fundAccount"
                            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white">
                            <i class="fas fa-wallet w-5"></i>
                            <span>Fund Account</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" id="logout"
                            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white">
                            <i class="fas fa-sign-out-alt w-5"></i>
                            <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden md:ml-64">
            <!-- Top Bar -->
            <header class="bg-white shadow-sm">
                <div class="flex items-center justify-between px-6 py-4">
                    <div class="flex items-center">
                        <button id="toggleSidebar" class="md:hidden text-gray-500 hover:text-gray-600 mr-4">
                            <i class="fas fa-bars"></i>
                        </button>
                        <h1 class="text-xl font-bold">Shopping Cart</h1>
                    </div>
                    <div>
                        <a href="dashboard.html" class="flex items-center space-x-2 text-blue-600 hover:text-blue-700">
                            <i class="fas fa-arrow-left"></i>
                            <span>Back</span>
                        </a>
                    </div>
                </div>
            </header>

            <!-- Content -->
            <main class="flex-1 overflow-y-auto p-6">
                <div class="max-w-4xl mx-auto">
                    <div class="bg-white rounded-xl shadow-md overflow-hidden">
                        <!-- Cart Header -->
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-2xl font-bold">Your Cart</h2>
                            <p class="text-gray-600">Review your selected accounts before checkout</p>
                        </div>

                        <!-- Cart Items -->
                        <div id="cartItems" class="divide-y divide-gray-200">
                            <!-- Loading State -->
                            <div class="p-8 text-center">
                                <div
                                    class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-2">
                                </div>
                                <p class="text-gray-600">Loading cart...</p>
                            </div>

                            <!-- Empty State (will be shown when cart is empty) -->
                            <div id="emptyCart" class="p-8 text-center hidden">
                                <i class="fas fa-shopping-cart text-4xl text-gray-300 mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-900 mb-1">Your cart is empty</h3>
                                <p class="text-gray-500 mb-4">Looks like you haven't added any accounts yet.</p>
                                <a href="dashboard.html"
                                    class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                                    <i class="fas fa-store mr-2"></i>
                                    Browse Accounts
                                </a>
                            </div>

                            <!-- Cart Item Template (hidden by default) -->
                            <div id="cartItemTemplate" class="hidden cart-item">
                                <div class="p-4 md:p-6 flex flex-col md:flex-row md:items-center">
                                    <div class="flex-1 mb-4 md:mb-0">
                                        <div class="flex items-start space-x-4">
                                            <div class="flex-shrink-0 h-16 w-16 rounded-lg bg-gray-100 overflow-hidden">
                                                <img src="" alt="Account image" class="h-full w-full object-cover"
                                                    id="itemImage">
                                            </div>
                                            <div>
                                                <h3 class="font-medium text-gray-900" id="itemName">Account Name</h3>
                                                <p class="text-sm text-gray-500" id="itemDetails">Platform: Instagram |
                                                    Followers: 10k</p>
                                                <div class="mt-1 flex items-center">
                                                    <span class="text-sm font-medium text-gray-900"
                                                        id="itemPrice">â‚¦5,000</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <div class="flex items-center border border-gray-300 rounded-lg">
                                            <button class="quantity-btn px-3 py-1 text-gray-600 hover:bg-gray-100"
                                                data-action="decrease">
                                                <i class="fas fa-minus"></i>
                                            </button>
                                            <span class="quantity px-3 py-1 text-center w-12">1</span>
                                            <button class="quantity-btn px-3 py-1 text-gray-600 hover:bg-gray-100"
                                                data-action="increase">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                        <button class="remove-btn p-2 text-gray-500 hover:text-red-500">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Cart Summary -->
                        <div class="p-6 bg-gray-50 border-t border-gray-200">
                            <div class="space-y-3 mb-6">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Total Items:</span>
                                    <span id="totalItems" class="font-medium">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Total Price:</span>
                                    <span id="totalPrice" class="font-medium">â‚¦0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Your Balance:</span>
                                    <span id="cartUserBalance" class="font-medium">â‚¦0</span>
                                </div>
                            </div>

                            <button id="checkoutButton"
                                class="w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                                disabled>
                                <i class="fas fa-lock mr-2"></i> Checkout
                            </button>

                            <div id="insufficientFunds" class="mt-4 p-4 bg-yellow-50 rounded-lg hidden">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-exclamation-triangle text-yellow-500 mt-1"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h3 class="text-sm font-medium text-yellow-800">Insufficient funds</h3>
                                        <div class="mt-2 text-sm text-yellow-700">
                                            <p>You don't have enough balance to complete this purchase.</p>
                                        </div>
                                        <div class="mt-4">
                                            <button id="fundFromCart"
                                                class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none">
                                                Fund Account
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Fund Account Modal -->
    <div id="fundModal"
        class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 opacity-0 invisible transition-all duration-300">
        <div class="bg-white rounded-lg shadow-xl transform transition-all max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex justify-between items-start">
                    <h2 class="text-xl font-bold">Fund Your Account</h2>
                    <button class="close text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="mt-6">
                    <div class="bg-blue-50 p-4 rounded-lg mb-6">
                        <h3 class="font-medium text-blue-800 mb-2">Chat with Admin</h3>
                        <p class="text-blue-700 mb-3">To fund your account, please chat with our admin who will guide
                            you through the process.</p>
                        <div class="bg-white p-3 rounded-md">
                            <p class="text-sm font-medium text-blue-800 mb-2">Our admin will provide you with:</p>
                            <ul class="list-disc list-inside text-sm text-blue-700 space-y-1">
                                <li>Bank account details for transfer</li>
                                <li>Alternative payment methods</li>
                                <li>Assistance with any questions</li>
                            </ul>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label for="fundAmount" class="block text-sm font-medium text-gray-700 mb-1">Amount
                                (â‚¦)</label>
                            <div class="mt-1 relative rounded-md shadow-sm">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <span class="text-gray-500">â‚¦</span>
                                </div>
                                <input type="number" id="fundAmount" min="1000" step="1000"
                                    class="focus:ring-blue-500 focus:border-blue-500 block w-full pl-8 pr-12 py-2 border-gray-300 rounded-md"
                                    placeholder="1000" required>
                            </div>
                        </div>

                        <button id="sendFundRequest"
                            class="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors">
                            Send Fund Request
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Success Modal -->
    <div id="checkoutSuccessModal"
        class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 opacity-0 invisible transition-all duration-300">
        <div class="bg-white rounded-lg shadow-xl transform transition-all max-w-md w-full mx-4">
            <div class="p-6 text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4">
                    <i class="fas fa-check text-green-600 text-xl"></i>
                </div>
                <h2 class="text-xl font-bold text-gray-900 mb-2">Purchase Successful!</h2>
                <p class="text-gray-600 mb-4">Your accounts have been purchased successfully.</p>
                <p class="text-gray-600 mb-6">You can view your purchased accounts and login details in your <a
                        href="purchases.html" class="text-blue-600 hover:underline">Purchase History</a>.</p>

                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
                    <button id="viewPurchasesBtn"
                        class="flex-1 py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors">
                        View Purchases
                    </button>
                    <button id="continueShopping"
                        class="flex-1 py-2 px-4 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-md font-medium transition-colors">
                        Continue Shopping
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock data - in a real app, this would come from your backend
        const mockUser = {
            name: "John Doe",
            balance: 15000,
            cart: [
                {
                    id: "acc1",
                    name: "Instagram Account",
                    platform: "Instagram",
                    followers: "10k",
                    price: 5000,
                    image: "https://via.placeholder.com/100?text=IG"
                },
                {
                    id: "acc2",
                    name: "Twitter Account",
                    platform: "Twitter",
                    followers: "5k",
                    price: 3000,
                    image: "https://via.placeholder.com/100?text=TW"
                }
            ]
        };

        // DOM Elements
        const sidebar = document.getElementById('sidebar');
        const toggleSidebar = document.getElementById('toggleSidebar');
        const closeSidebar = document.getElementById('closeSidebar');
        const cartItemsContainer = document.getElementById('cartItems');
        const emptyCartElement = document.getElementById('emptyCart');
        const cartItemTemplate = document.getElementById('cartItemTemplate');
        const totalItemsElement = document.getElementById('totalItems');
        const totalPriceElement = document.getElementById('totalPrice');
        const cartUserBalanceElement = document.getElementById('cartUserBalance');
        const checkoutButton = document.getElementById('checkoutButton');
        const insufficientFundsElement = document.getElementById('insufficientFunds');
        const fundFromCartButton = document.getElementById('fundFromCart');
        const userNameElement = document.getElementById('userName');
        const userBalanceElement = document.getElementById('userBalance');
        const cartCountElement = document.getElementById('cartCount');
        const fundModal = document.getElementById('fundModal');
        const fundAccountButton = document.getElementById('fundAccount');
        const closeModalButtons = document.querySelectorAll('.close');
        const sendFundRequestButton = document.getElementById('sendFundRequest');
        const checkoutSuccessModal = document.getElementById('checkoutSuccessModal');
        const viewPurchasesBtn = document.getElementById('viewPurchasesBtn');
        const continueShoppingBtn = document.getElementById('continueShopping');

        // State
        let user = {
            name: '',
            balance: 0,
            cart: []
        };

        // Initialize the app
        function init() {
            // Load user data (in a real app, this would be an API call)
            setTimeout(() => {
                user = {
                    ...mockUser,
                    cart: [...mockUser.cart]
                };
                updateUserInfo();
                renderCart();
            }, 800);

            // Setup event listeners
            setupEventListeners();
        }

        // Update user information in the UI
        function updateUserInfo() {
            userNameElement.textContent = user.name;
            userBalanceElement.textContent = `Balance: â‚¦${user.balance.toLocaleString()}`;
            cartUserBalanceElement.textContent = `â‚¦${user.balance.toLocaleString()}`;
            cartCountElement.textContent = user.cart.length;
        }

        // Render the cart items
        function renderCart() {
            if (user.cart.length === 0) {
                cartItemsContainer.innerHTML = '';
                emptyCartElement.classList.remove('hidden');
                totalItemsElement.textContent = '0';
                totalPriceElement.textContent = 'â‚¦0';
                checkoutButton.disabled = true;
                return;
            }

            emptyCartElement.classList.add('hidden');
            cartItemsContainer.innerHTML = '';

            let totalItems = 0;
            let totalPrice = 0;

            user.cart.forEach(item => {
                totalItems += 1;
                totalPrice += item.price;

                const cartItem = cartItemTemplate.cloneNode(true);
                cartItem.classList.remove('hidden');
                cartItem.setAttribute('data-id', item.id);

                cartItem.querySelector('#itemImage').src = item.image;
                cartItem.querySelector('#itemName').textContent = item.name;
                cartItem.querySelector('#itemDetails').textContent = `Platform: ${item.platform} | Followers: ${item.followers}`;
                cartItem.querySelector('#itemPrice').textContent = `â‚¦${item.price.toLocaleString()}`;

                // Quantity buttons
                const decreaseBtn = cartItem.querySelector('[data-action="decrease"]');
                const increaseBtn = cartItem.querySelector('[data-action="increase"]');
                const quantityElement = cartItem.querySelector('.quantity');
                const removeBtn = cartItem.querySelector('.remove-btn');

                decreaseBtn.addEventListener('click', () => {
                    // In a real app, you would update the quantity in the cart
                    // For this demo, we'll just remove the item if quantity is 1
                    const currentQuantity = parseInt(quantityElement.textContent);
                    if (currentQuantity > 1) {
                        quantityElement.textContent = currentQuantity - 1;
                    } else {
                        removeFromCart(item.id);
                    }
                    updateCartSummary();
                });

                increaseBtn.addEventListener('click', () => {
                    const currentQuantity = parseInt(quantityElement.textContent);
                    quantityElement.textContent = currentQuantity + 1;
                    updateCartSummary();
                });

                removeBtn.addEventListener('click', () => {
                    removeFromCart(item.id);
                });

                cartItemsContainer.appendChild(cartItem);
            });

            totalItemsElement.textContent = totalItems;
            totalPriceElement.textContent = `â‚¦${totalPrice.toLocaleString()}`;

            // Check if user has enough balance
            checkoutButton.disabled = false;
            if (user.balance < totalPrice) {
                checkoutButton.disabled = true;
                insufficientFundsElement.classList.remove('hidden');
            } else {
                insufficientFundsElement.classList.add('hidden');
            }
        }

        // Remove item from cart
        function removeFromCart(itemId) {
            user.cart = user.cart.filter(item => item.id !== itemId);
            cartCountElement.textContent = user.cart.length;
            renderCart();
        }

        // Update cart summary
        function updateCartSummary() {
            let totalItems = 0;
            let totalPrice = 0;

            document.querySelectorAll('.cart-item').forEach(item => {
                const quantity = parseInt(item.querySelector('.quantity').textContent);
                const price = parseInt(item.querySelector('#itemPrice').textContent.replace(/[^\d]/g, ''));

                totalItems += quantity;
                totalPrice += price * quantity;
            });

            totalItemsElement.textContent = totalItems;
            totalPriceElement.textContent = `â‚¦${totalPrice.toLocaleString()}`;

            // Check if user has enough balance
            checkoutButton.disabled = false;
            if (user.balance < totalPrice) {
                checkoutButton.disabled = true;
                insufficientFundsElement.classList.remove('hidden');
            } else {
                insufficientFundsElement.classList.add('hidden');
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Sidebar toggle
            toggleSidebar.addEventListener('click', () => {
                sidebar.classList.toggle('-translate-x-full');
            });

            closeSidebar.addEventListener('click', () => {
                sidebar.classList.add('-translate-x-full');
            });

            // Checkout button
            checkoutButton.addEventListener('click', () => {
                // In a real app, this would make an API call to process the payment
                // For this demo, we'll just show the success modal
                checkoutSuccessModal.classList.add('active');
                checkoutSuccessModal.classList.remove('opacity-0', 'invisible');
                checkoutSuccessModal.querySelector('.modal-content').classList.remove('opacity-0');

                // Clear the cart after successful checkout
                user.cart = [];
                cartCountElement.textContent = '0';
                renderCart();
            });

            // Fund account buttons
            fundAccountButton.addEventListener('click', (e) => {
                e.preventDefault();
                showFundModal();
            });

            fundFromCartButton.addEventListener('click', (e) => {
                e.preventDefault();
                showFundModal();
            });

            // Modal controls
            closeModalButtons.forEach(button => {
                button.addEventListener('click', () => {
                    fundModal.classList.remove('active');
                    fundModal.classList.add('opacity-0', 'invisible');
                    checkoutSuccessModal.classList.remove('active');
                    checkoutSuccessModal.classList.add('opacity-0', 'invisible');
                });
            });

            // Send fund request
            sendFundRequestButton.addEventListener('click', () => {
                const amount = parseInt(document.getElementById('fundAmount').value);
                if (isNaN(amount) || amount < 1000) {
                    alert('Please enter a valid amount (minimum â‚¦1000)');
                    return;
                }

                // In a real app, this would send a request to your backend
                alert(`Fund request for â‚¦${amount.toLocaleString()} has been sent to admin. They will contact you shortly.`);

                fundModal.classList.remove('active');
                fundModal.classList.add('opacity-0', 'invisible');
            });

            // Success modal buttons
            viewPurchasesBtn.addEventListener('click', () => {
                window.location.href = 'purchases.html';
            });

            continueShoppingBtn.addEventListener('click', () => {
                window.location.href = 'dashboard.html';
                checkoutSuccessModal.classList.remove('active');
                checkoutSuccessModal.classList.add('opacity-0', 'invisible');
            });

            // Logout button
            document.getElementById('logout').addEventListener('click', (e) => {
                e.preventDefault();
                // In a real app, this would make an API call to logout
                window.location.href = 'login.html';
            });
        }

        // Show fund modal
        function showFundModal() {
            fundModal.classList.add('active');
            fundModal.classList.remove('opacity-0', 'invisible');
            document.getElementById('fundAmount').focus();
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>